<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Groupsor Submit Tester</title>
  <style>
    body { font-family: system-ui, sans-serif; background:#f5f6fa; margin:0; padding:2rem; }
    main { max-width:800px; margin:auto; background:#fff; padding:2rem; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.1); }
    label { font-weight:500; display:block; margin-top:1rem; }
    input, textarea { width:100%; padding:.6rem; border:1px solid #ccc; border-radius:6px; }
    textarea { min-height:100px; }
    button { background:#0070f3; color:#fff; border:none; padding:.7rem 1.4rem; border-radius:6px; cursor:pointer; margin-top:1rem; }
    pre { background:#111; color:#0f0; padding:1rem; border-radius:6px; margin-top:1rem; white-space:pre-wrap; }
  </style>
</head>
<body>
  <main>
    <h2>Test Submit to Groupsor via Vercel Proxy</h2>
    <form id="f">
      <label>WhatsApp Link:</label>
      <input id="glink" placeholder="https://chat.whatsapp.com/..." required>

      <label>Category ID (gcid):</label>
      <input id="gcid" value="30">

      <label>Country ID (cid):</label>
      <input id="cid" value="30">

      <label>Language ID (lid):</label>
      <input id="lid" value="3">

      <label>Tags:</label>
      <input id="tags" placeholder="Friendship, Indo">

      <label>Description:</label>
      <textarea id="gdesc">Grup test via vercel proxy.</textarea>

      <button type="submit">Submit</button>
    </form>
    <pre id="out">Ready.</pre>
  </main>

  <script>
    document.querySelector("#f").addEventListener("submit", async (e) => {
      e.preventDefault();
      const data = {
        glink: glink.value,
        gcid: gcid.value,
        cid: cid.value,
        lid: lid.value,
        tags: tags.value,
        gdesc: gdesc.value,
        key: "zxjQq+CpDVqVjdabsbh6ZRbG6k5UOo7EX3XZOp/CfLbDxl9+fXoSTrN2EXOsG5V5"
      };

      out.textContent = "Sending...";
      const res = await fetch("/api/proxy", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: new URLSearchParams(data)
      });

      const text = await res.text();
      out.textContent = "Response:\n" + text.slice(0, 20000);
    });
  </script>
</body>
</html>
